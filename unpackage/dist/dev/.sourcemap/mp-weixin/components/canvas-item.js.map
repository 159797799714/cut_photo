{"version":3,"sources":[null,"webpack:///C:/Users/11424/Documents/HBuilderProjects/cartphoto/components/canvas-item.vue?058b","webpack:///C:/Users/11424/Documents/HBuilderProjects/cartphoto/components/canvas-item.vue?4a74","webpack:///C:/Users/11424/Documents/HBuilderProjects/cartphoto/components/canvas-item.vue?ced3","uni-app:///components/canvas-item.vue","webpack:///C:/Users/11424/Documents/HBuilderProjects/cartphoto/components/canvas-item.vue?a7e1","webpack:///C:/Users/11424/Documents/HBuilderProjects/cartphoto/components/canvas-item.vue?41ca"],"names":["name","data","ctx","props","canvasData","type","default","imgSpanWidth","imgSpanHeight","windowWidth","index","imgUrl","watch","handler","console","immediate","mounted","methods","drawImg","dWidth","dHeight","dx","dy","downLoad","uni","x","y","destWidth","destHeight","canvasId","success","wx","filePath","cb","fail","canvasIdErrorCallback"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwH;AACxH;AAC+D;AACL;AACc;;;AAGxE;AACoM;AACpM,gBAAgB,4MAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sFAAM;AACR,EAAE,+FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAgwB,CAAgB,gxBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;eCQpxB;EACAA;EACAC;IACA;MACAC;IACA;EACA;EACAC;IACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;IACA;IACAC;MACAL;MACAC;IACA;IACAK;MACAN;MACAC;IACA;EACA;EACAM;IACAD;MACAE;QACAC;QACA;MACA;MACAC;IACA;IACAX;MACAU;MACA;IACA;EACA;EACAE;IACA;IACA;EACA;EACAC;IACAC;MAAA;MACA;QACAP;QACA;QACA;UAAAQ;UAAAC;UAAAb;UAAAC;UAAAa;UAAAC;QACA;QACApB;QACAA;MACA;IAEA;IACAqB;MACA;MACA;QAAAJ;QAAAC;MACAI;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;UACA;UACAhB;;UAEA;;UAEAiB;YACAC;YACAF;cACAG;cACAnB;YACA;YACAoB;cACAD;cACAnB;YACA;UACA;;UAGA;QAMA;MACA;IACA;IAEA;;IA2BAqB;MACArB;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACnIA;AAAA;AAAA;AAAA;AAAu6C,CAAgB,23CAAG,EAAC,C;;;;;;;;;;;ACA37C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/canvas-item.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./canvas-item.vue?vue&type=template&id=655b9706&\"\nvar renderjs\nimport script from \"./canvas-item.vue?vue&type=script&lang=js&\"\nexport * from \"./canvas-item.vue?vue&type=script&lang=js&\"\nimport style0 from \"./canvas-item.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/canvas-item.vue\"\nexport default component.exports","export * from \"-!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./canvas-item.vue?vue&type=template&id=655b9706&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./canvas-item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./canvas-item.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"canvas-box\">\r\n\t\t<canvas :canvas-id=\"`myCanvas-${index}`\" :id=\"`myCanvas-${index}`\" class=\"my-canvas\"  :style=\"{height: canvasData.imgSpanHeight+'px',width: canvasData.imgSpanWidth+'px'}\"  @error=\"canvasIdErrorCallback\"></canvas>\r\n\t</view>\r\n\t\t\n</template>\n\n<script>\n\texport default {\n\t\tname:\"canvasItem\",\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tctx: null,\n\t\t\t};\n\t\t},\r\n\t\tprops: {\r\n\t\t\tcanvasData: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: {\r\n\t\t\t\t\timgSpanWidth: 120,\r\n\t\t\t\t\timgSpanHeight: 120,\r\n\t\t\t\t\twindowWidth: 375\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tindex: {\r\n\t\t\t\ttype: [String, Number],\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\timgUrl: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\timgUrl: {\r\n\t\t\t\thandler(val) {\r\n\t\t\t\t\tconsole.log('来了老弟')\r\n\t\t\t\t\tthis.drawImg && this.drawImg(val)\r\n\t\t\t\t},\r\n\t\t\t\timmediate: true\r\n\t\t\t},\r\n\t\t\tcanvasData(val) {\r\n\t\t\t\t\tconsole.log('来了老弟canvasData')\r\n\t\t\t\t\tthis.drawImg && this.drawImg()\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tconst ctx = uni.createCanvasContext(`myCanvas-${this.index}`, this)\r\n\t\t\tthis.ctx = ctx\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tdrawImg(imgUrl) {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\timgUrl = imgUrl || this.imgUrl\r\n\t\t\t\t\tif (!imgUrl) return\r\n\t\t\t\t\tconst { dWidth, dHeight, imgSpanWidth, imgSpanHeight, dx, dy} = this.canvasData\r\n\t\t\t\t\tconst ctx = this.ctx || uni.createCanvasContext(`myCanvas-${this.index}`, this)\r\n\t\t\t\t\tctx.drawImage(imgUrl, dx, dy, dWidth, dHeight)\r\n\t\t\t\t\tctx.draw()\t\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tdownLoad(cb) {\r\n\t\t\t\tconst _this = this\r\n\t\t\t\t\tconst { dWidth, dHeight} = this.canvasData\r\n\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t  x: 0,\r\n\t\t\t\t  y: 0,\r\n\t\t\t\t  destWidth: dWidth,\r\n\t\t\t\t  destHeight: dHeight,\r\n\t\t\t\t  canvasId: `myCanvas-${this.index}`,\r\n\t\t\t\t  success: function(res) {\r\n\t\t\t\t    // 在H5平台下，tempFilePath 为 base64\r\n\t\t\t\t    console.log(res.tempFilePath)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 非h5\r\n\t\t\t\t\t\t// #ifndef H5\r\n\t\t\t\t\t\twx.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess(result) {\r\n\t\t\t\t\t\t\t\tcb && cb(true)\r\n\t\t\t\t\t\t\t\tconsole.log('保存成功', JSON.stringify(result))\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\t\tcb && cb(false)\r\n\t\t\t\t\t\t\t\tconsole.log(`保存失败${JSON.stringify(err)}`)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// H5\r\n\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t_this.savePicture(res.tempFilePath, cb)\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t  } \r\n\t\t\t\t}, this)\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// H5\r\n\t\t\t// #ifdef H5\r\n\t\t\t// base64转blob文件再下载\r\n\t\t\tsavePicture(base64, cb) {\r\n\t\t\t\tvar arr = base64.split(',');\r\n\t\t\t\tvar bytes = atob(arr[1]);\r\n\t\t\t\tlet ab = new ArrayBuffer(bytes.length);\r\n\t\t\t\tlet ia = new Uint8Array(ab);\r\n\t\t\t\tfor (let i = 0; i < bytes.length; i++) {\r\n\t\t\t\t\tia[i] = bytes.charCodeAt(i);\r\n\t\t\t\t}\r\n\t\t\t\tvar blob = new Blob([ab], { type: 'application/octet-stream' });\r\n\t\t\t\tvar url = URL.createObjectURL(blob);\r\n\t\t\t\tvar a = document.createElement('a');\r\n\t\t\t\ta.href = url;\r\n\t\t\t\ta.download = new Date().valueOf() + \".png\";\r\n\t\t\t\tvar e = document.createEvent('MouseEvents');\r\n\t\t\t\te.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\r\n\t\t\t\ta.dispatchEvent(e);\r\n\t\t\t\tURL.revokeObjectURL(url);\r\n\t\t\t\t\r\n\t\t\t\tcb && cb(true)\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\t\r\n\t\t\t\r\n\r\n\t\t\tcanvasIdErrorCallback: function (e) {\r\n\t\t\t\tconsole.error(e.detail.errMsg)\r\n\t\t\t}\r\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\r\n\n.my-canvas{\r\n\tdisplay: block!important;\r\n\tz-index: 1;\r\n}\n</style>","import mod from \"-!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./canvas-item.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\LEI\\\\HBuilderX.3.7.3.20230223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./canvas-item.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1688121681210\n      var cssReload = require(\"E:/LEI/HBuilderX.3.7.3.20230223/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}